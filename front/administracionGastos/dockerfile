# Etapa de construcción
FROM node:18 AS build

WORKDIR /app

# Instalar dependencias
COPY package*.json ./
RUN npm install

# Copiar archivos fuente y construir la aplicación
COPY . .
RUN npm run build --prod

# Etapa de desarrollo (para ejecutar la aplicación Angular)
FROM node:18

WORKDIR /app

COPY /app/dist/administracionGastos /usr/share/nginx/html

# Instalar dependencias solo para desarrollo
RUN npm install -g @angular/cli@latest

EXPOSE 4200

# Comando para iniciar el servidor de desarrollo de Angular
CMD ["ng", "serve", "--host", "0.0.0.0", "--port", "4200"]
